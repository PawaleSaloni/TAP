<!DOCTYPE html>
<html>
    <head>
        <title>jQuery Demo 1</title>
        <script src="scripts/jquery.min.js"></script>
    </head>
    <body>
        <!-- Presentation logic for content-->
        <h1>Transflower Learning Pvt. Ltd.</h1>
        <p> Doing ordinary things extra ordinarily</p>
        <p> Mentor as a Service</p>
        <p id="para"> Hello</p>
        <hr/>
        <ol>
            <li>Corprate Trainings</li>
            <li>Online Dev Camps</li>
            <li>Finishing School Mentoring</li>
        </ol>
        <button id="btnApply">Apply</button>
        <button id="btnReset">Reset</button>
        <!--
        <hr/>
            <table>
            <tr>
                <td>User name</td>
                <td><input type="text" value="Ravi" id="txtUserName" name="username"/></td>
            </tr>
            <tr>
                <td>Pasword</td>
                <td><input type="password" value="seed" id="txtPassword" name="password"/></td>
            </tr>
            <tr>
                <td> </td>
                <td><button id="btnLogin">Login</button></td>
            </tr>
        </table>
        -->
        <hr/>
        <input type="number" value="1" id="txtId"/>
        <br/>
        <button id="btnFetchFlower">Fetch flower</button>
        <h2>Todays Requested Fresh Flower for you...</h2>
      
        <table>
            <tr>
                <td>Title</td>
                <td><p id="pTitle"></p></td>
            </tr>
            <tr>
                <td>Image</td>
                <td><img  id="imgFlower" width="100" height="100"></img></td>
            </tr>
            <tr>
                <td>Description</td>
                <td><p id="pDescription"></p></td>
            </tr>

            <tr>
                <td>Quantity</td>
                <td><p id="pQuantity"></p></td>
            </tr>
            <tr>
                <td>Unit pricce </td>
                <td><p id="pUnitPrice"></p></td>
            </tr>
        </table>


        <!-- Client Side Javascript Code-->
        <script>

            //JQuery Code
            //Event binding

            $(document).ready( function(){
                console.log("Document is ready");
                //Event Binding
                //event is registered with event handler
                //Event handler is a callback function
                //event handler will be automatically invoked 
                //event is generated by enduser on click of that button
                
                $("#btnApply").click( function(){
                    console.log(" Apply Button is clicked...")
                    //Databinding
                    //associating data with HTML elment
                   
                    $("#para").text("Apply is clicked...");
                    $("#para").show();

                    var newUser={
                                "username":"Narendra",
                                "password":"transflower"
                    };

                    // before setting value 
                    // can you invoke $.ajax=() to fetch user details from 
                    // http://localhost:9898/api/users/2

                    //change the values of HTML element
                    // DOM manipulation
                    $("#txtUserName").val(newUser.username);
                    $("#txtPassword").val(newUser.password);
                });

                $("#btnReset").click(function()
                {
                   // $("#para").text("Reset is clicked...");
                   $("#para").hide();

                    console.log(" Rest Button is clicked...")
                });   
                
                
               $("#btnLogin").click(function(){
                                                //get values from html elements
                                                var username=$("#txtUserName").val();
                                                var password=$("#txtPassword").val();
                                                var credential={
                                                    "username":username,
                                                    "password":password
                                                };
                                                console.log(credential);
                                            });

                //Event Binding using jQuery

                $("#btnFetchFlower").click(function(){
                    var id=$("#txtId").val();
                    console.log("fetching Flowers from external API");
                    //Call Ajax
                    //Read operation :Read Operation external api call  to rest api
                    //External Data Access using jQuery Ajax Function
                    $.ajax({
                            url:"/api/flowers/" +id,
                            type: 'GET', 
                            success: function (flower) {
                                console.log(flower);
                                // DOM manipulation
                                // using jQuery functions
                                $("#pTitle").text(flower.name);
                                $("#pDescription").text(flower.description);
                                $("#pUnitPrice").text(flower.unitprice);
                                $("#pQuantity").text(flower.quantity);
                                $("#imgFlower").attr("src", flower.imagerul);
                            },
                            error:function(err){
                                console.log(err);
                            }
                    });
                })
            });
        </script>
    </body>
</html>